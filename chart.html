<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self'; font-src 'self' data:; img-src 'self' data:; connect-src https://api.coingecko.com; base-uri 'none'; form-action 'none'; frame-ancestors 'none'; upgrade-insecure-requests">
  <title>Gráfico • WallStreetTV</title>
  <meta name="theme-color" content="#0A0C10" />
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop stop-color='%23F5C451'/%3E%3Cstop offset='1' stop-color='%230D1117'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect rx='12' ry='12' width='64' height='64' fill='url(%23g)'/%3E%3Cpath d='M14 40h14v6H14zM36 18h14v6H36zM36 40h14v6H36zM14 26h14v6H14z' fill='%23E8ECEF'/%3E%3C/svg%3E" />
  <link rel="manifest" href="./manifest.webmanifest" crossorigin="use-credentials" />
  <link rel="stylesheet" href="./styles.css" />
  <style>
    .chart-wrap{display:flex; flex-direction:column; gap:12px; padding:16px}
    .chart-head{display:flex; align-items:center; justify-content:space-between; gap:12px}
    .big{font-size: clamp(18px, 4vw, 28px); font-weight:800}
    canvas#big{width:100%; height:60vh; background:#0b0f16; border-radius:12px; box-shadow: inset 0 0 0 1px rgba(255,255,255,.06)}
  .live-row{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
  .live-tick{display:flex; gap:10px; align-items:center; background:#0b0f16; border-radius:10px; padding:8px 10px; box-shadow: inset 0 0 0 1px rgba(255,255,255,.06)}
  .live-price{font-weight:900; font-size:clamp(16px,4vw,24px)}
  .live-delta.up{color:var(--up)}
  .live-delta.down{color:var(--down)}
  .mini-kpis{display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:8px}
  .mini-kpis .kpi{background:#0b0f16; border-radius:10px; padding:8px 10px}
  .mini-kpis .label{color:var(--muted); font-size:12px}
  .mini-kpis .value{font-weight:800}
  .micro-tape{position:relative; white-space:nowrap; overflow:hidden}
  .micro-track{display:inline-flex; gap:16px; padding-left:16px; animation: tape-scroll 40s linear infinite}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <a class="back" href="./index.html">← Voltar</a>
      <div class="big" id="title">—</div>
      <div class="range" role="group" aria-label="Período do gráfico">
        <button class="rg" data-rg="1h">1h</button>
        <button class="rg" data-rg="4h">4h</button>
        <button class="rg" data-rg="24h">24h</button>
      </div>
    </header>
    <div class="chart-wrap">
      <div class="live-row">
        <span class="live-badge">AO VIVO</span>
        <div class="live-tick">
          <span id="sym"></span>
          <span id="livePrice" class="live-price">—</span>
          <span id="liveDelta" class="live-delta">—</span>
        </div>
      </div>
      <div class="mini-kpis">
        <div class="kpi"><div class="label">Alta 24h</div><div class="value" id="hi">—</div></div>
        <div class="kpi"><div class="label">Baixa 24h</div><div class="value" id="lo">—</div></div>
        <div class="kpi"><div class="label">Volume 24h</div><div class="value" id="vo">—</div></div>
      </div>
      <div class="micro-tape"><div id="microTrack" class="micro-track"></div></div>
      <canvas id="big" width="1600" height="800" aria-label="Gráfico detalhado"></canvas>
      <div class="sub" id="src">Fonte: BitPreço/Binance/CoinGecko</div>
    </div>
  </div>
  <script src="./chart.js" defer></script>
</body>
</html>
